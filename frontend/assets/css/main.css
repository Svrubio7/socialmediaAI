@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --grid-size: 64px;
    --grid-line: rgba(0, 0, 0, 0.045);
    --app-bg: #ffffff;
    --cream-ui: #E8F6FD;
    --cream-border: #C5DCE9;
  }

  .dark {
    --grid-line: rgba(124, 251, 253, 0.09);
    --app-bg: #0a0a09;
    --cream-ui: #141412;
    --cream-border: #2a2a28;
  }

  html {
    @apply antialiased scroll-smooth;
  }

  body {
    @apply text-surface-900 min-h-screen font-mono dark:text-white;
    font-feature-settings: 'kern' 1, 'liga' 1;
    background-color: var(--app-bg);
    background-image:
      linear-gradient(to right, var(--grid-line) 1px, transparent 1px),
      linear-gradient(to bottom, var(--grid-line) 1px, transparent 1px);
    background-size: var(--grid-size) var(--grid-size);
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-mono font-normal tracking-tight text-surface-900 dark:text-surface-50;
  }

  /* Custom scrollbar for webkit browsers */
  ::-webkit-scrollbar {
    @apply w-2;
  }

  ::-webkit-scrollbar-track {
    @apply bg-surface-100 dark:bg-surface-950;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-surface-300 rounded-full dark:bg-surface-700;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-surface-400 dark:bg-surface-600;
  }

  /* Focus styles */
  :focus-visible {
    @apply outline-none ring-2 ring-primary-500 ring-offset-2 ring-offset-white dark:ring-offset-surface-950;
  }
}

@layer components {
  /* Typewriter Effect */
  .typewriter {
    overflow: hidden;
    white-space: nowrap;
    border-right: 2px solid;
    animation: typewriter 3s steps(40) 1s forwards, blink 0.8s step-end infinite;
  }

  .typewriter-cursor {
    @apply inline-block w-0.5 h-[1.1em] bg-primary-400 ml-1 align-middle;
    animation: blink 0.8s step-end infinite;
  }

  /* Text reveal animations */
  .text-reveal {
    @apply opacity-0;
    animation: textReveal 0.8s ease-out forwards;
  }

  .word-reveal {
    @apply overflow-hidden;
  }

  .word-reveal span {
    @apply inline-block;
    animation: wordReveal 0.5s ease-out forwards;
  }

  /* Letter by letter animation */
  .letter-animate span {
    @apply inline-block opacity-0;
    animation: letterBounce 0.3s ease-out forwards;
  }

  /* Staggered animations */
  .stagger-children > * {
    @apply opacity-0;
    animation: fadeInUp 0.6s ease-out forwards;
  }

  .stagger-children > *:nth-child(1) { animation-delay: 0.1s; }
  .stagger-children > *:nth-child(2) { animation-delay: 0.2s; }
  .stagger-children > *:nth-child(3) { animation-delay: 0.3s; }
  .stagger-children > *:nth-child(4) { animation-delay: 0.4s; }
  .stagger-children > *:nth-child(5) { animation-delay: 0.5s; }
  .stagger-children > *:nth-child(6) { animation-delay: 0.6s; }

  /* Button base */
  .btn {
    @apply inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-xl font-medium text-sm
           transition-all duration-200 ease-out-expo
           focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-surface-950
           disabled:opacity-50 disabled:cursor-not-allowed disabled:pointer-events-none;
  }

  .btn-primary {
    @apply btn
           hover:-translate-y-0.5 hover:shadow-glow-sm
           active:translate-y-0 active:shadow-none
           focus-visible:ring-primary-500;
    background-color: #e1f690;
    color: #0a0a09;
    border: 1px solid #c8db84;
  }

  .btn-secondary {
    @apply btn
           active:translate-y-0
           focus-visible:ring-accent-300;
    background-color: #7cfbfd;
    color: #0a0a09;
    border: 1px solid #59e3e5;
  }

  .btn-accent {
    @apply btn
           hover:-translate-y-0.5 hover:shadow-glow-accent
           active:translate-y-0 active:shadow-none
           focus-visible:ring-accent-300;
    background-color: #7cfbfd;
    color: #0a0a09;
    border: 1px solid #59e3e5;
  }

  .btn-ghost {
    @apply btn bg-transparent text-surface-600
           hover:bg-surface-200 hover:text-surface-900
           dark:text-surface-400 dark:hover:bg-surface-800 dark:hover:text-surface-200
           focus-visible:ring-surface-500;
  }

  .btn-danger {
    @apply btn bg-red-600 text-white
           hover:bg-red-500 hover:-translate-y-0.5
           active:translate-y-0
           focus-visible:ring-red-500;
  }

  .btn-outline {
    @apply btn bg-transparent text-primary-400 border border-primary-500/50
           hover:bg-primary-500/10 hover:border-primary-400
           focus-visible:ring-primary-500;
  }

  .btn-primary:hover {
    background-color: #d4ee7d;
    border-color: #b8d06f;
  }

  .btn-secondary:hover {
    background-color: #95fdff;
    border-color: #6cecf0;
  }

  .btn-accent:hover {
    background-color: #95fdff;
    border-color: #6cecf0;
  }

  .cream-btn {
    background-color: #7cfbfd;
    color: #0a0a09;
    border: 1px solid #59e3e5;
  }

  .cream-btn:hover {
    background-color: #95fdff;
    border-color: #6cecf0;
  }

  .dark .editor-header button {
    background-color: #7cfbfd;
    color: #0a0a09;
    border-color: #59e3e5;
  }

  .dark .editor-header button:hover {
    background-color: #95fdff;
    border-color: #6cecf0;
  }

  /* Size variants */
  .btn-sm {
    @apply px-3.5 py-2 text-sm;
  }

  .btn-lg {
    @apply px-6 py-3 text-base;
  }

  .btn-xl {
    @apply px-8 py-4 text-lg;
  }

  /* Toggle pills */
  .toggle-pill {
    @apply flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 border;
  }

  .toggle-pill-active {
    @apply bg-primary-500/10 text-primary-600 border-primary-500/20
           dark:bg-primary-500/20 dark:text-primary-300 dark:border-primary-500/30;
  }

  .toggle-pill-inactive {
    @apply bg-surface-100 text-surface-600 border-surface-200 hover:border-surface-300
           dark:bg-surface-800/50 dark:text-surface-400 dark:border-surface-700 dark:hover:border-surface-600;
  }

  /* Input styles - match card background (no light boxes) */
  .input {
    @apply w-full px-4 py-3 rounded-xl bg-surface-100 border border-surface-200
           text-surface-900 placeholder-surface-500 dark:bg-surface-800/50 dark:border-surface-700/60 dark:placeholder-surface-400 font-sans
           transition-all duration-200
           focus:outline-none focus:ring-2 focus:ring-primary-500/40 focus:border-primary-500
           disabled:opacity-50 disabled:cursor-not-allowed;
    color: #121310;
  }

  .dark .input {
    color: #e8e8e8;
  }

  .input-error {
    @apply border-red-500 focus:ring-red-500/50 focus:border-red-500;
  }

  .label {
    @apply block text-sm font-medium text-surface-700 dark:text-surface-300 mb-2;
  }

  /* Card styles */
  .card {
    @apply border border-surface-300 rounded-xl p-6
           transition-all duration-300
           dark:bg-surface-900 dark:border-surface-500/80;
    background-color: var(--cream-ui);
    color: #121310;
  }

  .dark .card {
    color: #e8e8e8;
    border-color: rgba(110, 170, 205, 0.25);
  }

  .card .text-surface-100 {
    color: #121310;
  }

  .dark .card .text-surface-100 {
    color: #e8e8e8;
  }

  .card .text-surface-200 {
    color: #1a1b18;
  }

  .dark .card .text-surface-200 {
    color: #d4d4d4;
  }

  .card-icon {
    @apply transition-colors;
  }

  .dark .card-icon {
    filter: brightness(1.1);
  }

  .card-hover {
    @apply card
           hover:border-surface-400
           hover:-translate-y-1 hover:shadow-xl hover:shadow-surface-900/10
           dark:hover:border-surface-500/90 dark:hover:bg-surface-900/90 dark:hover:shadow-surface-950/60;
    transition: filter 200ms ease, box-shadow 200ms ease, border-color 200ms ease, transform 200ms ease;
  }

  .card-hover:hover {
    filter: brightness(1.03);
  }

  .card-interactive {
    @apply card cursor-pointer
           hover:border-primary-500/40
           hover:-translate-y-1 hover:shadow-xl hover:shadow-black/10
           active:scale-[0.98]
           transition-all duration-200
           dark:hover:bg-surface-800/70 dark:hover:border-primary-400/40;
  }

  .card-interactive:hover {
    filter: brightness(1.03);
  }

  /* Badge styles */
  .badge {
    @apply inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium font-mono;
  }

  .badge-primary {
    @apply badge bg-primary-500/15 text-primary-400 border border-primary-500/20;
  }

  .badge-success {
    @apply badge bg-emerald-500/15 text-emerald-400 border border-emerald-500/20;
  }

  .badge-warning {
    @apply badge bg-amber-500/15 text-amber-400 border border-amber-500/20;
  }

  .badge-danger {
    @apply badge bg-red-500/15 text-red-400 border border-red-500/20;
  }

  .badge-accent {
    @apply badge bg-accent-200/10 text-accent-200 border border-accent-200/20;
  }

  /* Text effects */
  .gradient-text {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-primary-400 to-accent-200;
  }

  .gradient-text-subtle {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-surface-800 to-surface-600 dark:from-surface-100 dark:to-surface-300;
  }

  /* Section styles */
  .section {
    @apply py-12 md:py-16 relative;
  }

  .section-tight {
    @apply py-8 md:py-10;
  }

  .container-tight {
    @apply max-w-4xl mx-auto px-6 sm:px-8 lg:px-12;
  }

  .container-wide {
    @apply max-w-7xl mx-auto px-6 sm:px-8 lg:px-12;
  }

  /* Full-width app content when using sidebar (no max-width) */
  .container-app {
    @apply w-full mx-auto px-6 sm:px-8 lg:px-12;
  }

  /* Section divider - contained within content, not edge-to-edge */
  .section-divider {
    @apply max-w-4xl mx-auto h-px bg-transparent;
  }

  /* Skeleton loading */
  .skeleton {
    @apply relative overflow-hidden bg-surface-200 rounded-lg dark:bg-surface-800;
  }

  .skeleton::after {
    @apply absolute inset-0 -translate-x-full bg-gradient-to-r from-transparent via-surface-300/50 dark:via-surface-700/50 to-transparent animate-shimmer;
    content: '';
    background-size: 200% 100%;
  }

  /* Divider */
  .divider {
    @apply h-px bg-surface-200 dark:bg-surface-800;
  }

  /* Backdrop blur overlay */
  .overlay {
    @apply fixed inset-0 bg-surface-950/80 backdrop-blur-sm z-40;
  }

  /* Image placeholder */
  .image-placeholder {
    @apply bg-surface-100 border border-surface-200 rounded-xl flex items-center justify-center text-surface-500 dark:bg-surface-800 dark:border-surface-700 dark:text-surface-500;
  }

  /* Monospace/typewriter text */
  .mono {
    @apply font-mono;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .text-pretty {
    text-wrap: pretty;
  }

  /* Animation delays */
  .animate-delay-75 {
    animation-delay: 75ms;
  }

  .animate-delay-100 {
    animation-delay: 100ms;
  }

  .animate-delay-150 {
    animation-delay: 150ms;
  }

  .animate-delay-200 {
    animation-delay: 200ms;
  }

  .animate-delay-300 {
    animation-delay: 300ms;
  }

  .animate-delay-400 {
    animation-delay: 400ms;
  }

  .animate-delay-500 {
    animation-delay: 500ms;
  }

  .animate-delay-700 {
    animation-delay: 700ms;
  }

  .animate-delay-1000 {
    animation-delay: 1000ms;
  }

  /* Animation fill mode */
  .animate-fill-forwards {
    animation-fill-mode: forwards;
  }

  .animate-fill-both {
    animation-fill-mode: both;
  }

  /* Gradient backgrounds */
  .bg-gradient-subtle {
    @apply bg-gradient-to-b from-surface-950 via-surface-900/50 to-surface-950;
  }

  .bg-gradient-radial-top {
    background: radial-gradient(ellipse 60% 40% at 50% 0%, rgba(225, 246, 144, 0.14), transparent);
  }

  /* Glow effects */
  .glow-primary {
    box-shadow: 0 0 40px -10px rgba(225, 246, 144, 0.5);
  }

  .glow-accent {
    box-shadow: 0 0 40px -10px rgba(124, 251, 253, 0.4);
  }

  /* Hide scrollbar */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
}

/* Keyframe animations */
@keyframes typewriter {
  from { width: 0; }
  to { width: 100%; }
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes textReveal {
  from {
    opacity: 0;
    transform: translateY(20px);
    filter: blur(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
  }
}

@keyframes wordReveal {
  from {
    opacity: 0;
    transform: translateY(100%);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes letterBounce {
  0% {
    opacity: 0;
    transform: translateY(-20px) scale(0.8);
  }
  60% {
    transform: translateY(5px) scale(1.1);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
